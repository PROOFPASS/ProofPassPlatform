<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <defs>
    <linearGradient id="proverGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#DC2626;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#B91C1C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="verifierGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#059669;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#047857;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="circuitGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#7C3AED;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6D28D9;stop-opacity:1" />
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6366F1"/>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="550" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#1E293B">Zero-Knowledge Proof Flow (Groth16)</text>

  <!-- Circuit Types Section -->
  <rect x="50" y="60" width="800" height="80" rx="10" fill="#F3E8FF" stroke="#C084FC" stroke-width="2"/>
  <text x="450" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#6D28D9">SUPPORTED CIRCUIT TYPES</text>

  <!-- Circuit Type Boxes -->
  <rect x="80" y="100" width="200" height="30" rx="5" fill="url(#circuitGrad)" filter="url(#shadow)"/>
  <text x="180" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Threshold: value ≥ threshold</text>

  <rect x="310" y="100" width="220" height="30" rx="5" fill="url(#circuitGrad)" filter="url(#shadow)"/>
  <text x="420" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Range: min ≤ value ≤ max</text>

  <rect x="560" y="100" width="260" height="30" rx="5" fill="url(#circuitGrad)" filter="url(#shadow)"/>
  <text x="690" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Set Membership: value ∈ {set}</text>

  <!-- Prover Side -->
  <rect x="50" y="160" width="380" height="280" rx="10" fill="#FEF2F2" stroke="#FECACA" stroke-width="2"/>
  <text x="240" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#DC2626">PROVER (Client)</text>

  <!-- Step 1: Private Input -->
  <g transform="translate(80, 200)">
    <rect width="140" height="70" rx="8" fill="url(#proverGrad)" filter="url(#shadow)"/>
    <circle cx="20" cy="20" r="12" fill="white"/>
    <text x="20" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#DC2626">1</text>
    <text x="70" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Private Input</text>
    <text x="70" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#FECACA">Secret value</text>
  </g>

  <!-- Arrow -->
  <path d="M220 235 L260 235" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 2: Circom Circuit -->
  <g transform="translate(270, 200)">
    <rect width="140" height="70" rx="8" fill="url(#circuitGrad)" filter="url(#shadow)"/>
    <circle cx="20" cy="20" r="12" fill="white"/>
    <text x="20" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#7C3AED">2</text>
    <text x="70" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Circom Circuit</text>
    <text x="70" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#E9D5FF">R1CS constraints</text>
  </g>

  <!-- Arrow down -->
  <path d="M340 280 L340 310" stroke="#7C3AED" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 3: Witness Generation -->
  <g transform="translate(80, 320)">
    <rect width="140" height="70" rx="8" fill="url(#proverGrad)" filter="url(#shadow)"/>
    <circle cx="20" cy="20" r="12" fill="white"/>
    <text x="20" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#DC2626">3</text>
    <text x="70" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Witness Gen</text>
    <text x="70" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#FECACA">WASM execution</text>
  </g>

  <!-- Arrow -->
  <path d="M220 355 L260 355" stroke="#DC2626" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 4: Proof Generation -->
  <g transform="translate(270, 320)">
    <rect width="140" height="70" rx="8" fill="url(#proverGrad)" filter="url(#shadow)"/>
    <circle cx="20" cy="20" r="12" fill="white"/>
    <text x="20" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#DC2626">4</text>
    <text x="70" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Groth16 Prove</text>
    <text x="70" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#FECACA">zkey + witness</text>
  </g>

  <!-- Arrow to verifier -->
  <path d="M430 355 L470 355" stroke="#6366F1" stroke-width="3" marker-end="url(#arrow)"/>

  <!-- Verifier Side -->
  <rect x="470" y="160" width="380" height="280" rx="10" fill="#ECFDF5" stroke="#6EE7B7" stroke-width="2"/>
  <text x="660" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#059669">VERIFIER (Server)</text>

  <!-- Step 5: Receive Proof -->
  <g transform="translate(500, 320)">
    <rect width="140" height="70" rx="8" fill="url(#verifierGrad)" filter="url(#shadow)"/>
    <circle cx="20" cy="20" r="12" fill="white"/>
    <text x="20" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#059669">5</text>
    <text x="70" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Receive Proof</text>
    <text x="70" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#A7F3D0">π + publicSignals</text>
  </g>

  <!-- Arrow -->
  <path d="M640 355 L680 355" stroke="#059669" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 6: Verify -->
  <g transform="translate(690, 320)">
    <rect width="140" height="70" rx="8" fill="url(#verifierGrad)" filter="url(#shadow)"/>
    <circle cx="20" cy="20" r="12" fill="white"/>
    <text x="20" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#059669">6</text>
    <text x="70" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Groth16 Verify</text>
    <text x="70" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#A7F3D0">vkey + signals</text>
  </g>

  <!-- Public Inputs Box -->
  <g transform="translate(500, 200)">
    <rect width="320" height="90" rx="8" fill="#F0FDF4" stroke="#86EFAC" stroke-width="1"/>
    <text x="160" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">Public Inputs (revealed)</text>
    <text x="160" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#166534">• nullifierHash (unique proof ID)</text>
    <text x="160" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#166534">• threshold/min/max/setHashes</text>
    <text x="160" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#166534">• NOT the secret value</text>
  </g>

  <!-- Result Arrow -->
  <path d="M760 400 L760 430" stroke="#059669" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Result Box -->
  <rect x="660" y="440" width="200" height="50" rx="8" fill="#059669" filter="url(#shadow)"/>
  <text x="760" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">✓ valid: true/false</text>
  <text x="760" y="482" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#A7F3D0">Zero-knowledge verified</text>

  <!-- Key Properties -->
  <rect x="50" y="460" width="380" height="70" rx="8" fill="#F1F5F9" stroke="#CBD5E1" stroke-width="1"/>
  <text x="240" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#475569">ZK Properties Guaranteed</text>
  <text x="140" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748B">Completeness</text>
  <text x="240" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748B">Soundness</text>
  <text x="340" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748B">Zero-Knowledge</text>
  <text x="140" y="518" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#94A3B8">True proofs verify</text>
  <text x="240" y="518" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#94A3B8">False proofs fail</text>
  <text x="340" y="518" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#94A3B8">Nothing leaked</text>
</svg>
